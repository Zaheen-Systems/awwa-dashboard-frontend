import{c as X,j as e,w as x,r as d,x as Fe,y as Ae,z as Y,A as Te,P as y,C as ee,R as Ee,E as _e,F as E,G as ke,H as De,J as I,v as Ie,B as j,K as Be,L as p,I as v,T as Le,k as Re}from"./index-B8PRHD2z.js";import{u as Me,a as $e}from"./useUsers-PdwlX9GH.js";import{C as K}from"./chevron-left-61dAuvrI.js";import{C as Ve}from"./camera-DYjgDU1y.js";import{U as Ue}from"./user-BPrg1Uey.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=X("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);function _({className:a,...s}){return e.jsx("div",{"data-slot":"card",className:x("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...s})}function q({className:a,...s}){return e.jsx("div",{"data-slot":"card-header",className:x("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function J({className:a,...s}){return e.jsx("h4",{"data-slot":"card-title",className:x("leading-none",a),...s})}function O({className:a,...s}){return e.jsx("p",{"data-slot":"card-description",className:x("text-muted-foreground",a),...s})}function k({className:a,...s}){return e.jsx("div",{"data-slot":"card-content",className:x("px-6 [&:last-child]:pb-6",a),...s})}var F="Tabs",[He,Ns]=Y(F,[ee]),se=ee(),[Ke,B]=He(F),ae=d.forwardRef((a,s)=>{const{__scopeTabs:l,value:n,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:c,activationMode:m="automatic",...h}=a,u=Fe(c),[C,f]=Ae({prop:n,onChange:r,defaultProp:o??"",caller:F});return e.jsx(Ke,{scope:l,baseId:Te(),value:C,onValueChange:f,orientation:i,dir:u,activationMode:m,children:e.jsx(y.div,{dir:u,"data-orientation":i,...h,ref:s})})});ae.displayName=F;var te="TabsList",re=d.forwardRef((a,s)=>{const{__scopeTabs:l,loop:n=!0,...r}=a,o=B(te,l),i=se(l);return e.jsx(Ee,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(y.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:s})})});re.displayName=te;var oe="TabsTrigger",ne=d.forwardRef((a,s)=>{const{__scopeTabs:l,value:n,disabled:r=!1,...o}=a,i=B(oe,l),c=se(l),m=ie(i.baseId,n),h=ce(i.baseId,n),u=n===i.value;return e.jsx(_e,{asChild:!0,...c,focusable:!r,active:u,children:e.jsx(y.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":h,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:m,...o,ref:s,onMouseDown:E(a.onMouseDown,C=>{!r&&C.button===0&&C.ctrlKey===!1?i.onValueChange(n):C.preventDefault()}),onKeyDown:E(a.onKeyDown,C=>{[" ","Enter"].includes(C.key)&&i.onValueChange(n)}),onFocus:E(a.onFocus,()=>{const C=i.activationMode!=="manual";!u&&!r&&C&&i.onValueChange(n)})})})});ne.displayName=oe;var le="TabsContent",de=d.forwardRef((a,s)=>{const{__scopeTabs:l,value:n,forceMount:r,children:o,...i}=a,c=B(le,l),m=ie(c.baseId,n),h=ce(c.baseId,n),u=n===c.value,C=d.useRef(u);return d.useEffect(()=>{const f=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(ke,{present:r||u,children:({present:f})=>e.jsx(y.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":m,hidden:!f,id:h,tabIndex:0,...i,ref:s,style:{...a.style,animationDuration:C.current?"0s":void 0},children:f&&o})})});de.displayName=le;function ie(a,s){return`${a}-trigger-${s}`}function ce(a,s){return`${a}-content-${s}`}var qe=ae,Je=re,Oe=ne,We=de;function Ze({className:a,...s}){return e.jsx(qe,{"data-slot":"tabs",className:x("flex flex-col gap-2",a),...s})}function Qe({className:a,...s}){return e.jsx(Je,{"data-slot":"tabs-list",className:x("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",a),...s})}function W({className:a,...s}){return e.jsx(Oe,{"data-slot":"tabs-trigger",className:x("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function Z({className:a,...s}){return e.jsx(We,{"data-slot":"tabs-content",className:x("flex-1 outline-none",a),...s})}var ue={exports:{}},me={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=d;function Xe(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var Ye=typeof Object.is=="function"?Object.is:Xe,es=w.useState,ss=w.useEffect,as=w.useLayoutEffect,ts=w.useDebugValue;function rs(a,s){var l=s(),n=es({inst:{value:l,getSnapshot:s}}),r=n[0].inst,o=n[1];return as(function(){r.value=l,r.getSnapshot=s,D(r)&&o({inst:r})},[a,l,s]),ss(function(){return D(r)&&o({inst:r}),a(function(){D(r)&&o({inst:r})})},[a]),ts(l),l}function D(a){var s=a.getSnapshot;a=a.value;try{var l=s();return!Ye(a,l)}catch{return!0}}function os(a,s){return s()}var ns=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?os:rs;me.useSyncExternalStore=w.useSyncExternalStore!==void 0?w.useSyncExternalStore:ns;ue.exports=me;var ls=ue.exports;function ds(){return ls.useSyncExternalStore(is,()=>!0,()=>!1)}function is(){return()=>{}}var L="Avatar",[cs,Ss]=Y(L),[us,Ce]=cs(L),he=d.forwardRef((a,s)=>{const{__scopeAvatar:l,...n}=a,[r,o]=d.useState("idle");return e.jsx(us,{scope:l,imageLoadingStatus:r,onImageLoadingStatusChange:o,children:e.jsx(y.span,{...n,ref:s})})});he.displayName=L;var xe="AvatarImage",fe=d.forwardRef((a,s)=>{const{__scopeAvatar:l,src:n,onLoadingStatusChange:r=()=>{},...o}=a,i=Ce(xe,l),c=ms(n,o),m=De(h=>{r(h),i.onImageLoadingStatusChange(h)});return I(()=>{c!=="idle"&&m(c)},[c,m]),c==="loaded"?e.jsx(y.img,{...o,ref:s,src:n}):null});fe.displayName=xe;var ge="AvatarFallback",pe=d.forwardRef((a,s)=>{const{__scopeAvatar:l,delayMs:n,...r}=a,o=Ce(ge,l),[i,c]=d.useState(n===void 0);return d.useEffect(()=>{if(n!==void 0){const m=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(m)}},[n]),i&&o.imageLoadingStatus!=="loaded"?e.jsx(y.span,{...r,ref:s}):null});pe.displayName=ge;function Q(a,s){return a?s?(a.src!==s&&(a.src=s),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ms(a,{referrerPolicy:s,crossOrigin:l}){const n=ds(),r=d.useRef(null),o=n?(r.current||(r.current=new window.Image),r.current):null,[i,c]=d.useState(()=>Q(o,a));return I(()=>{c(Q(o,a))},[o,a]),I(()=>{const m=C=>()=>{c(C)};if(!o)return;const h=m("loaded"),u=m("error");return o.addEventListener("load",h),o.addEventListener("error",u),s&&(o.referrerPolicy=s),typeof l=="string"&&(o.crossOrigin=l),()=>{o.removeEventListener("load",h),o.removeEventListener("error",u)}},[o,l,s]),i}var Cs=he,hs=fe,xs=pe;function fs({className:a,...s}){return e.jsx(Cs,{"data-slot":"avatar",className:x("relative flex size-10 shrink-0 overflow-hidden rounded-full",a),...s})}function gs({className:a,...s}){return e.jsx(hs,{"data-slot":"avatar-image",className:x("aspect-square size-full",a),...s})}function ps({className:a,...s}){return e.jsx(xs,{"data-slot":"avatar-fallback",className:x("bg-muted flex size-full items-center justify-center rounded-full",a),...s})}function Ps({onBack:a}){const{data:s}=Me(localStorage.getItem("user_id")),[l,n]=d.useState(""),[r,o]=d.useState(""),[i,c]=d.useState(""),[m,h]=d.useState(""),[u,C]=d.useState(""),[f,R]=d.useState(""),[A,M]=d.useState("");d.useEffect(()=>{s&&(n(s.first_name??""),o(s.last_name??""),c(s.email??""),h(s.phone_number??""),C(s.job_title??""),R(s.department??""),M(s.bio??""))},[s]);const[$,V]=d.useState(""),[N,U]=d.useState(""),[G,z]=d.useState(""),[S,ve]=d.useState("personal"),[H,T]=d.useState(!1),be=$e(),{mutate:ye}=we(s==null?void 0:s.id),je=async(t,g,b)=>{const{data:P}=await Re.post(`/api/users/${t}/change-password`,{old_password:g,new_password:b});return P};function we(t){return Ie({mutationFn:g=>je(t,g.oldPassword,g.newPassword)})}const Ne=t=>{t.preventDefault(),console.log("Profile updated:",{personal:{firstName:l,lastName:r,email:i,phone:m,jobTitle:u,department:f,bio:A},security:{passwordChanged:!!N}});const g={first_name:l,last_name:r,email:i,phone_number:m,job_title:u,department:f,bio:A};s!=null&&s.id&&be.mutate({id:s==null?void 0:s.id,data:g},{onSuccess:()=>console.log("done")}),a()},Se=()=>{if(N!==G){alert("New passwords do not match");return}if(N.length<8){alert("Password must be at least 8 characters long");return}console.log("Password changed successfully"),ye({oldPassword:$,newPassword:N},{onSuccess:()=>{alert("Password changed successfully"),V(""),U(""),z(""),T(!1)},onError:t=>{var g,b;alert(((b=(g=t.response)==null?void 0:g.data)==null?void 0:b.detail)||"Failed to change password")}})},Pe=()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.style.display="none",t.onchange=g=>{var P;const b=(P=g.target.files)==null?void 0:P[0];b&&console.log("Photo uploaded:",b.name)},document.body.appendChild(t),t.click(),document.body.removeChild(t)};return e.jsx("div",{className:"flex-1 px-6 py-8",style:{backgroundColor:"#F8F9FA"},children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4",style:{color:"#e65039"}}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3C3C3C"},children:"Account Settings"})]}),e.jsxs(j,{onClick:a,className:"flex items-center space-x-2 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:opacity-90",style:{backgroundColor:"#e65039",color:"white",borderColor:"#e65039"},children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{children:"Back"})]})]}),e.jsx(_,{className:"mb-8 rounded-lg shadow-sm",children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(fs,{className:"w-24 h-24",children:[e.jsx(gs,{src:"",alt:"Profile picture"}),e.jsx(ps,{style:{backgroundColor:"#e65039",color:"white"},children:"MA"})]}),e.jsx("button",{onClick:Pe,className:"absolute bottom-0 right-0 p-2 rounded-full shadow-lg transition-all duration-200 hover:opacity-90",style:{backgroundColor:"#e65039"},children:e.jsx(Ve,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",style:{color:"#3C3C3C"},children:[l," ",r]}),e.jsx("p",{className:"mb-2",style:{color:"#6C757D"},children:u}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Be,{variant:"secondary",className:"px-3 py-1 rounded-lg",style:{backgroundColor:"#fff5f3",color:"#e65039"},children:f}),e.jsx("span",{className:"text-sm",style:{color:"#6C757D"},children:"Last login: Today at 9:30 AM"})]})]})]})})}),e.jsxs(Ze,{value:S,onValueChange:ve,className:"space-y-6",children:[e.jsxs(Qe,{className:"grid w-full grid-cols-2 bg-white border-2 rounded-lg",style:{borderColor:"#BDC3C7"},children:[e.jsxs(W,{value:"personal",className:"flex items-center space-x-2 rounded-lg",style:{color:S==="personal"?"white":"#3C3C3C",backgroundColor:S==="personal"?"#e65039":"transparent"},children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Personal Information"})]}),e.jsxs(W,{value:"security",className:"flex items-center space-x-2 rounded-lg",style:{color:S==="security"?"white":"#3C3C3C",backgroundColor:S==="security"?"#e65039":"transparent"},children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Security Settings"})]})]}),e.jsx(Z,{value:"personal",className:"space-y-6",children:e.jsxs(_,{className:"rounded-lg shadow-sm",children:[e.jsxs(q,{children:[e.jsx(J,{style:{color:"#3C3C3C"},children:"Personal Information"}),e.jsx(O,{children:"Update your personal details and contact information."})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"firstName",style:{color:"#3C3C3C"},children:"First Name"}),e.jsx(v,{id:"firstName",value:l,onChange:t=>n(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#e65039",onBlur:t=>t.target.style.borderColor="#BDC3C7"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"lastName",style:{color:"#3C3C3C"},children:"Last Name"}),e.jsx(v,{id:"lastName",value:r,onChange:t=>o(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#e65039",onBlur:t=>t.target.style.borderColor="#BDC3C7"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"email",style:{color:"#3C3C3C"},children:"Email Address"}),e.jsx(v,{id:"email",type:"email",value:i,onChange:t=>c(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#e65039",onBlur:t=>t.target.style.borderColor="#BDC3C7"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"phone",style:{color:"#3C3C3C"},children:"Phone Number"}),e.jsx(v,{id:"phone",value:m,onChange:t=>h(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#2C5F7C",onBlur:t=>t.target.style.borderColor="#BDC3C7"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"jobTitle",style:{color:"#3C3C3C"},children:"Job Title"}),e.jsx(v,{id:"jobTitle",value:u,onChange:t=>C(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#2C5F7C",onBlur:t=>t.target.style.borderColor="#BDC3C7"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"department",style:{color:"#3C3C3C"},children:"Department"}),e.jsx(v,{id:"department",value:f,onChange:t=>R(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#2C5F7C",onBlur:t=>t.target.style.borderColor="#BDC3C7"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"bio",style:{color:"#3C3C3C"},children:"Bio"}),e.jsx(Le,{id:"bio",value:A,onChange:t=>M(t.target.value),rows:4,className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"},onFocus:t=>t.target.style.borderColor="#2C5F7C",onBlur:t=>t.target.style.borderColor="#BDC3C7",placeholder:"Tell us about yourself..."})]})]})]})}),e.jsx(Z,{value:"security",className:"space-y-6",children:e.jsxs(_,{className:"rounded-lg shadow-sm",children:[e.jsxs(q,{children:[e.jsx(J,{style:{color:"#3C3C3C"},children:"Password & Security"}),e.jsx(O,{children:"Manage your password and security settings."})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-2 rounded-lg",style:{borderColor:"#BDC3C7"},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"#3C3C3C"},children:"Change Password"}),e.jsx("p",{className:"text-sm",style:{color:"#6C757D"},children:"Last changed 3 months ago"})]}),e.jsxs(j,{onClick:()=>T(!H),variant:"outline",className:"border-2 rounded-lg",style:{borderColor:"#e65039",color:"#e65039"},children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Change"]})]}),H&&e.jsxs("div",{className:"space-y-4 p-4 border-2 rounded-lg",style:{borderColor:"#E8F4F8",backgroundColor:"#F8F9FA"},children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"currentPassword",style:{color:"#3C3C3C"},children:"Current Password"}),e.jsx(v,{id:"currentPassword",type:"password",value:$,onChange:t=>V(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"}})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"newPassword",style:{color:"#3C3C3C"},children:"New Password"}),e.jsx(v,{id:"newPassword",type:"password",value:N,onChange:t=>U(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"}})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"confirmPassword",style:{color:"#3C3C3C"},children:"Confirm New Password"}),e.jsx(v,{id:"confirmPassword",type:"password",value:G,onChange:t=>z(t.target.value),className:"mt-2 border-2 rounded-none",style:{borderColor:"#BDC3C7"}})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(j,{onClick:Se,className:"px-4 py-2 rounded-lg",style:{backgroundColor:"#e65039",color:"white"},children:"Update Password"}),e.jsx(j,{onClick:()=>T(!1),variant:"outline",className:"border-2 rounded-lg",style:{borderColor:"#BDC3C7"},children:"Cancel"})]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[e.jsx(j,{onClick:a,variant:"outline",className:"px-6 py-2 border-2 rounded-lg",style:{borderColor:"#BDC3C7",color:"#3C3C3C"},children:"Cancel"}),e.jsx(j,{onClick:Ne,className:"px-6 py-2 rounded-lg",style:{backgroundColor:"#e65039",color:"white"},children:"Save All Changes"})]})]})})}export{Ps as ProfileSettingsPage};
